# Home Assistant Add-on: Mailfilter

Mailfilter based on Rspamd and ClamAV.

![Supports aarch64 Architecture][aarch64-shield] ![Supports amd64 Architecture][amd64-shield]
![Supports armv7 Architecture][armv7-shield]

## About

Important: This addon requires that the Mailserver add-on is installed and running!

This add-on is experimental, and provides a mailfilter for your the Mailserver add-on.
It can only filter emails for the Mailserver add-on.

## Installation

Follow these steps to get the add-on installed on your system:

Add the repository `https://github.com/erik73/hassio-addons`.
Find the "Mailfilter" add-on and click it.
Click on the "INSTALL" button.

## How to use

### Starting the add-on

After installation you are presented with a default configuration.

Adjust the add-on configuration to match your requirements.
Save the add-on configuration by clicking the "SAVE" button.
Start the add-on.

## Configuration

Example configuration:

```yaml
enable_antivirus: false
enable_dkim_signing: false
```

Please note: The antivirus option will consume a lot of memory.
The absolute minimum is 4GB of memory installed in your host.
Depending how many other add-ons that are installed 4GB might not be enough.

### Option: `enable_antivirus` (optional)

Turning this option on will enable the ClamAV virus scanner.
See above regarding the memory considerations.

#### Option: `enable_dkim_signing` (optional)

Enables DKIM signing for outgoing emails.
At the first start with this option enabled a DKIM key is generated.
The key will show in the log output. For reference, here is how the key is
generated by the add-on:
rspamadm dkim_keygen -b 2048 -s mail -k /ssl/dkim/mail.key

The selector is 'mail' and a 2048 bit rsa key is generated.
The mail.key and mail.pub files are saved in the /ssl/dkim directory in
Home Assistant

## Support

Got questions?

You could [open an issue here][issue] GitHub.

[aarch64-shield]: https://img.shields.io/badge/aarch64-yes-green.svg
[amd64-shield]: https://img.shields.io/badge/amd64-yes-green.svg
[armv7-shield]: https://img.shields.io/badge/armv7-yes-green.svg
[i386-shield]: https://img.shields.io/badge/i386-yes-green.svg
[issue]: https://github.com/erik73/addon-mailfilter/issues
[repository]: https://github.com/erik73/hassio-addons
